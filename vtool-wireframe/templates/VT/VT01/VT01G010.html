<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<!--/* [style] ============================================================================================================== */-->
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="../../../static/plugins/fontawesome-free/css/all.min.css">
<!-- Ionicons -->
<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
<!-- Google Font: Source Sans Pro -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700">
<!-- Theme style -->
<link rel="stylesheet" href="../../../static/plugins/admin-lte3/css/adminlte.min.css">
<!-- tempusdominus-bootstrap-4 -->
<link rel="stylesheet" href="../../../static/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
<!-- magnific-popup -->
<link rel="stylesheet" href="../../../static/plugins/magnific-popup/magnific-popup.css">
<!-- DataTables -->
<link rel="stylesheet" href="../../../static/plugins/datatables-bs4/css/dataTables.bootstrap4.css">
<!-- datatables-fixedcolumns -->
<link rel="stylesheet" href="../../../static/plugins/datatables-fixedcolumns/css/fixedColumns.bootstrap4.min.css">
<!-- custom -->
<link rel="stylesheet" href="../../../static/css/acms-vt.css">
<!--/* [style] ============================================================================================================== */-->
</head>
<body class="hold-transition layout-navbar-fixed sidebar-collapse">
  <div class="wrapper">
    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand border-bottom-0 navbar-dark navbar-primary">
      <!-- Left navbar links -->
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a></li>
        <li class="nav-item d-none d-sm-inline-block"><b><span class="nav-link">回線状況一覧</span></b></li>
        <!--li class="nav-item d-none d-sm-inline-block"><b><span class="nav-link">回線状況一覧</span></b></li-->
      </ul>
    </nav>
    <!-- /.navbar -->
    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-light-primary elevation-4 position-fixed">
      <!-- Brand Logo -->
      <a href="#" class="brand-link logo-switch sidebar-title">
	    <span class="logo-xs">ACMS Apex可視化ツール</span>
		<span class="logo-xl">
		  <strong>ACMS Apex可視化ツール</strong>
        </span>
      </a>
      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Sidebar user panel (optional) -->
        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
          <div class="image"></div>
          <div class="info"></div>
        </div>
        <!-- Sidebar Menu -->
        <nav class="mt-2">
          <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview">
            <li class="nav-item has-treeview menu-open">
              <a href="#" class="nav-link" id="menu" class="nav-link">システム <i class="right fas fa-angle-left"></i></a>
              <ul class="nav nav-treeview">
	              <li class="nav-item li-sub-item">
	                <a href="VT01G010.html" class="nav-link" data-toggle="main-sidebar">
	                  <p>回線状況一覧</p>
	                </a>
	              </li>
	              <li class="nav-item li-sub-item">
	                <a href="../VT02/VT02G010.html" class="nav-link">
	                  <p>未使用通信定義抽出</p>
	                </a>
	              </li>
              </ul>
            </li>
          </ul>
        </nav>
        <!-- /.sidebar-menu -->
      </div>
      <!-- /.sidebar -->
    </aside>
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <!-- div class="content-header"></div-->
      <!-- /.content-header -->

	  <!-- page's breadcrumbs -->
	  <nav aria-label="breadcrumb">
	    <ol class="breadcrumb">
		  <li class="breadcrumb-item"><a href="#">システム</a></li>
		  <li class="breadcrumb-item active" aria-current="page">回線状況一覧</li>
	    </ol>
	  </nav>

      <!-- Main content -->
      <section class="content text-sm">
        <!-- Horizontal Form -->
        <form class="form-horizontal">
          <!--/* [Main content] ============================================================================================================== */-->

          <!--/* ■■■■■ 検索条件 */-->
          <div class="card card-outline card-info">
            <div class="card-header">
              <h3 class="card-title">検索条件</h3>
              <div class="card-tools">
                <button type="button" class="btn btn-sm btn-tool" data-card-widget="collapse">
                  <i class="fas fa-minus"></i>
                </button>
              </div>
            </div>
            <div class="card-body">

					<div class="form-group row">
						<label class="control-label col-sm-2" for="searchDateFrom">検索日時：</label>
						<div class="col-sm-2">
							<input class="form-control form-control-sm" type="text" id="searchDateFrom" placeholder="yyyy-MM-dd HH:mm:ss">
						</div>
						<div class="col-sm-auto">
						 　<label class="col-form-label">～</label>
						</div>
						<div class="col-sm-2">
							<input class="form-control form-control-sm" type="text" id="searchDateTo" placeholder="yyyy-MM-dd HH:mm:ss">
						</div>
					</div>
					<div class="form-group row">
						<label class="control-label col-sm-2" for="comPortGroup">通信ポートグループ：</label>
						<div class="col-sm-2">
							<select class="form-control form-control-sm" id="comPortGroup">
							　　<option></option>
							　　<option>ポートグループ１</option>
							　　<option>ポートグループ２</option>
							　　<option>ポートグループ３</option>
							　　<option>ポートグループ４</option>
							　　<option>ポートグループ５</option>
							</select>
						</div>
					</div>
					<div class="form-group row">
						<label class="control-label col-sm-2" for="hacchaku">発着：</label>
						<div class="col-sm-2">
							<select class="form-control form-control-sm" id="hacchaku">
							　　<option></option>
							　　<option>発着１</option>
							　　<option>発着２</option>
							　　<option>発着３</option>
							　　<option>発着４</option>
							　　<option>発着５</option>
							</select>
						</div>
					</div>
					<div class="form-group row">
						<label class="control-label col-sm-2" for="protocol">プロトコル：</label>
						<div class="col-sm-2">
							<select class="form-control form-control-sm" id="protocol">
							　　<option></option>
							　　<option>プロトコル１</option>
							　　<option>プロトコル２</option>
							　　<option>プロトコル３</option>
							　　<option>プロトコル４</option>
							　　<option>プロトコル５</option>
							</select>
						</div>
					</div>

            </div>
            <div class="card-footer">
			  <div class="d-flex justify-content-center">
				<button type="button" class="btn btn-sm btn-primary btn-block col-sm-1" id="search">検索</button>
			  </div>
            </div>
          </div>

          <!--/* ■■■■■ 回線状況 */-->
          <div class="card card-outline card-info search-result">
            <div class="card-header">
              <h3 class="card-title">回線状況</h3>
              <div class="card-tools">
                <button type="button" class="btn btn-sm btn-default">
                  <a id="downloadGraph" download="ChartImage.jpg">グラフダウンロード</a>
                </button>
              </div>
            </div>
            <div class="card-body">
			  <div class="form-group row d-flex justify-content-center">
			    <div class="col-sm-11 chart-container text-center">
				  <canvas id="lineStatusChart"> </canvas>
				</div>
			  </div>
            </div>
          </div>

          <!--/* [Main content] ============================================================================================================== */-->
        </form>
      </section>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->
    <!-- Main Footer -->
    <footer class="main-footer text-sm text-center">
    </footer>
  </div>
  <!-- ./wrapper -->
  <!--/* [script] ============================================================================================================== */-->
  <!-- jQuery -->
  <script src="../../../static/plugins/jquery/jquery.min.js"></script>
  <!-- popper -->
  <script src="../../../static/plugins/popper/umd/popper.min.js"></script>
  <!-- moment -->
  <script src="../../../static/plugins/moment/moment.min.js"></script>
  <!-- Bootstrap 4 -->
  <script src="../../../static/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- AdminLTE App -->
  <script src="../../../static/plugins/admin-lte3/js/adminlte.min.js"></script>
  <!-- tempusdominus-bootstrap-4 -->
  <script src="../../../static/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
  <!-- magnific-popup -->
  <script src="../../../static/plugins/magnific-popup/jquery.magnific-popup.min.js"></script>
  <!-- DataTables -->
  <script src="../../../static/plugins/datatables/jquery.dataTables.js"></script>
  <script src="../../../static/plugins/datatables-bs4/js/dataTables.bootstrap4.js"></script>
  <!-- datatables-fixedcolumns -->
  <script src="../../../static/plugins/datatables-fixedcolumns/js/dataTables.fixedColumns.min.js"></script>
  <script src="../../../static/plugins/datatables-fixedcolumns/js/fixedColumns.bootstrap4.min.js"></script>
  <!-- jquery.fademover.js -->
  <script src="../../../static/plugins/jquery-fademover/jquery.fademover.js"></script>
  <!-- custom -->
  <script src="../../../static/js/acms-vt.js"></script>

  <!-- chart.js -->
  <!-- https://cdn.jsdelivr.net/npm/chart.js@2.8.0 -->
  <script src="../../../static/plugins/chart-graph/chart.js"></script>
  <!-- https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js -->
  <script src="../../../static/plugins/chart-graph/hammer.min.js"></script>
  <!-- https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.7 -->
  <script src="../../../static/plugins/chart-graph/chartjs-plugin-zoom.js"></script>
  <!-- https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/0.5.5/chartjs-plugin-annotation.min.js -->
  <script src="../../../static/plugins/chart-graph/chartjs-plugin-annotation.min.js"></script>

  <!-- page script -->
  <script>
     $(function () {
    	 $('.search-result').hide();
    	 $("#search").click(function(){
			$('.search-result').show();
   		 });

    	  // Chart rendering
    	  const canvass = document.getElementById('lineStatusChart');
    	  const ctx = canvass.getContext('2d');

    	  var lineStatusChart = new Chart(ctx, {
    	      type: 'line',
    	      data: {
    	          labels: ['2020/6/28 12:51', '2020/6/28 1:05', '2020/6/28 2:51', '2020/6/28 3:51', '2020/6/28 4:51', '2020/6/28 5:51',
    	        	  		'2020/6/28 5:55', '2020/6/28 6:01', '2020/6/28 6:02', '2020/6/28 7:09', '2020/6/28 8:09', '2020/6/28 8:17',
    	        	  		'2020/6/28 8:19', '2020/6/28 9:02', '2020/6/28 10:02', '2020/6/28 10:09', '2020/6/28 10:09', '2020/6/28 10:17',
    	        	  		'2020/6/28 10:55', '2020/6/28 11:01', '2020/6/28 11:02', '2020/6/28 11:09', '2020/6/28 12:09', '2020/6/28 12:17',
    	        	  		'2020/6/28 12:55', '2020/6/28 13:01', '2020/6/28 13:02', '2020/6/28 13:09', '2020/6/28 14:09', '2020/6/28 14:17',
    	        	  		'2020/6/28 14:55', '2020/6/28 15:01', '2020/6/28 15:02', '2020/6/28 15:09', '2020/6/28 16:09', '2020/6/28 16:17',
    	        	  		'2020/6/29 12:51', '2020/6/29 1:05', '2020/6/29 2:51', '2020/6/29 3:51', '2020/6/29 4:51', '2020/6/29 5:51',
    	        	  		'2020/6/29 5:55', '2020/6/29 6:01', '2020/6/29 6:02', '2020/6/29 7:09', '2020/6/29 8:09', '2020/6/29 8:17',
    	        	  		'2020/6/29 8:19', '2020/6/29 9:02', '2020/6/29 10:02', '2020/6/29 10:09', '2020/6/29 10:09', '2020/6/29 10:17',
    	        	  		'2020/6/29 10:55', '2020/6/29 11:01', '2020/6/29 11:02', '2020/6/29 11:09', '2020/6/29 12:09', '2020/6/29 12:17',
    	        	  		'2020/6/29 12:55', '2020/6/29 13:01', '2020/6/29 13:02', '2020/6/29 13:09', '2020/6/29 14:09', '2020/6/29 14:17',
    	        	  		'2020/6/29 14:55', '2020/6/29 15:01', '2020/6/29 15:02', '2020/6/29 15:09', '2020/6/29 16:09', '2020/6/29 16:17',
    	        	  		'2020/6/29 16:55', '2020/6/29 17:01', '2020/6/29 17:02', '2020/6/29 17:09', '2020/6/29 18:09', '2020/6/29 18:17',
    	        	  		'2020/6/30 12:51', '2020/6/30 1:05', '2020/6/30 2:51', '2020/6/30 3:51', '2020/6/30 4:51', '2020/6/30 5:51',
    	        	  		'2020/6/30 5:55', '2020/6/30 6:01', '2020/6/30 6:02', '2020/6/30 7:09', '2020/6/30 8:09', '2020/6/30 8:17',
    	        	  		'2020/6/30 8:19', '2020/6/30 9:02', '2020/6/30 10:02', '2020/6/30 10:09', '2020/6/30 10:09', '2020/6/30 10:17',
    	        	  		'2020/6/30 10:55', '2020/6/30 11:01', '2020/6/30 11:02', '2020/6/30 11:09', '2020/6/30 12:09', '2020/6/30 12:17',
    	        	  		'2020/6/30 12:55', '2020/6/30 13:01', '2020/6/30 13:02', '2020/6/30 13:09', '2020/6/30 14:09', '2020/6/30 14:17',
    	        	  		'2020/6/30 14:55', '2020/6/30 15:01', '2020/6/30 15:02', '2020/6/30 15:09', '2020/6/30 16:09', '2020/6/30 16:17',
    	        	  		'2020/6/31 12:51', '2020/6/31 1:05', '2020/6/31 2:51', '2020/6/31 3:51', '2020/6/31 4:51', '2020/6/31 5:51',
    	        	  		'2020/6/31 5:55', '2020/6/31 6:01', '2020/6/31 6:02', '2020/6/31 7:09', '2020/6/31 8:09', '2020/6/31 8:17',
    	        	  		'2020/6/31 8:19', '2020/6/31 9:02', '2020/6/31 10:02', '2020/6/31 10:09', '2020/6/31 10:09', '2020/6/31 10:17',
    	        	  		'2020/6/31 10:55', '2020/6/31 11:01', '2020/6/31 11:02', '2020/6/31 11:09', '2020/6/31 12:09', '2020/6/31 12:17',
    	        	  		'2020/6/31 12:55', '2020/6/31 13:01', '2020/6/31 13:02', '2020/6/31 13:09', '2020/6/31 14:09', '2020/6/31 14:17'],
    	          datasets: [{
    	              label: 'ZGN',
    	              data: [2,2,2,0,0,2,3,3,3,3,3,3,2,2,2,2,2,2,3,3,3,3,3,3,2,2,2,0,0,2,3,3,3,3,3,3,8,6,7,3,5,3,4,5,2,9,4,1,8,6,7,3,5,3,4,5,2,9,4,1,2,2,2,2,2,2,3,3,3,3,3,3,
    	            	  5,3,4,5,2,9,4,1,8,6,7,3,5,3,4,5,2,9,4,1,8,6,7,3,5,3,4,5,2,9,4,1,8,6,7,3,5,3,4,5,2,9,4,1,8,6,7,3,5,3,4,5,2,9,4,1,8,6,7,3,5,3,4,5,2,9,4,1,8,6,7,3],
    	              backgroundColor: [
    	                  '#0000FF'
    	              ],
    	              borderColor: [
    	                  'white'
    	              ],
    	              borderWidth: 1
    	          },
    	          {
    	              label: 'FTP',
    	              data: [5,3,4,5,2,9,4,11,8,6,7,3,5,3,4,5,2,9,4,1,8,6,7,3,5,33,4,5,2,9,4,1,8,6,7,3,5,34,4,5,2,9,14,1,8,6,7,3,5,3,4,35,2,9,4,1,8,6,7,3,5,3,4,5,2,9,4,1,8,6,7,3,
    	            	  7,8,2,1,8,6,7,3,5,3,4,5,2,9,4,1,8,6,7,33,5,3,4,5,2,9,4,1,6,8,4,3,4,5,6,1,7,8,22,1, 6, 8,4,3,14,5,6,1,7,8,2,1,6,8,4,3,4,5,6,1,7,8,2,1,6,8,4,3,4,5,6,1],
    	              backgroundColor: [
    	                  '#FFA500'
    	              ],
    	              borderColor: [
    	                  'white'
    	              ],
    	              borderWidth: 1
    	          },
    	          {
    	              label: 'JX',
    	              data: [7,8,2,10,18,16,27,3,5,23,14,5,12,9,4,1,18,6,7,13,15,3,4,5,12,9,4,1,6,8,4,13,14,5,6,1,7,8,2,18,36,18,24,3,14,5,6,1,7,18,22,11,16,8,24,3,4,5,6,11,7,18,2,12,6,8,14,13,14,25,6,11,
    	            	  12,22,12,20,20,12,3,23,33,23,13,13,2,2,2,2,2,2,3,13,43,13,33,3,14,22,12,10,30,22,13,13,23,3,3,23,8,6,7,3,5,3,14,5,2,19,4,19,8,40,7,3,5,3,14,5,2,19,4,11,2,12,2,22,2,2,13,23,3,33,3,13],
    	              backgroundColor: [
    	                  '#008000'
    	              ],
    	              borderColor: [
    	                  '#696969'
    	              ],
    	              borderWidth: 1
    	          }]
    	      },
    	      options: {
    	      	 title: {
    	               display: true,
    	               fontSize: 16
    	          },
    	          maintainAspectRatio: false,
    	          lineAtIndex: 20,
    			  legend: {
    					position: 'right',
    					align: "start"
    				},
    	          scales: {
    	            xAxes: [{
    	              display: true,
    	              scaleLabel: {
    	                display: true,
    	                labelString: '日時',
    	                fontSize: 16,
    	                fontStyle: 'bold'
    	              },
    	              gridLines : {
    	                  display : false
    	              }
    	            }],
    	            yAxes: [{
    	              /*stacked: true,*/
    	              ticks: {
    	                beginAtZero: true
    	              },
    	              display: true,
    	              scaleLabel: {
    	                display: true,
    	                labelString: '回線数',
    	                fontSize: 16,
    	                fontStyle: 'bold'
    	              },
    	              gridLines : {
    	            	  borderDash : [2,3]
    	              }
    	            }]
    	          },
    	          animation : {
    	              onComplete : done
    	          },
    	          tooltips: {
    	            mode: 'index',
    	          },
    	          // Container for pan options
    	          pan: {
    	              // Boolean to enable panning
    	              enabled: true,

    	              // Panning directions. Remove the appropriate direction to disable
    	              // Eg. 'y' would only allow panning in the y direction
    	              mode: 'xy',
    	              rangeMin: {
    	                // Format of min pan range depends on scale type
    	                x: null,
    	                y: 0
    	              },
    	              rangeMax: {
    	                // Format of max pan range depends on scale type
    	                x: null,
    	                y: null
    	              },

    	              speed: 20,
    	              // Minimal pan distance required before actually applying pan
    				  threshold: 10
    	          },

    	          // Container for zoom options
    	          zoom: {
    	              // Boolean to enable zooming
    	              enabled: true,
    	              // Zooming directions. Remove the appropriate direction to disable
    	              // Eg. 'y' would only allow zooming in the y direction
    	              mode: 'x',
    	              drag: false,
    	              rangeMin: {
    	                // Format of min zoom range depends on scale type
    	                x: null,
    	                y: null
    	              },
    	              rangeMax: {
    	                // Format of max zoom range depends on scale type
    	                x: null,
    	                y: null
    	              },
    	              // Speed of zoom via mouse wheel
    	              // (percentage of zoom on a wheel event)
    	              speed: 20,
    	              // Minimal zoom distance required before actually applying zoom
    	              threshold: 2,
    	              // On category scale, minimal zoom level before actually applying zoom
    	              sensitivity: 1,
    	          },
    	          elements: {
    	              point:{
    	                  radius: 0
    	              }
    	          },
    		      annotation: {
    		          annotations: [{
    		            type: 'line',
    		            mode: 'horizontal',
    		            scaleID: 'y-axis-0',
    		            value: 20,
    		            borderColor: 'red',
    		            borderDash:[2,3],
    		            borderWidth: 1,
    		            label: {
    		              enabled: false,
    		              content: 'License'
    		            }
    		          }]
    		        }
    	      },
    	      plugins:[{
    	      	beforeDraw: function(c) {
    	     	        var ctx = c.chart.ctx;
    	     	        ctx.fillStyle = 'white';
    	     	        ctx.fillRect(0, 0, c.chart.width, c.chart.height);
    	     	}
    	      }]
    	  });

    	  // download function
    	  function done() {
    	      const downloadLink = document.getElementById("downloadGraph");
    	      const chartToBase64Image = lineStatusChart.toBase64Image();
    	      downloadLink.href = chartToBase64Image;

    	  }

    	  // add buffer from the highest point in the graph
    	  const bufferLine = 10;
    	  const setData = new Set();

    	  lineStatusChart.data.datasets.forEach(function(dataset){
    		  dataset.data.forEach(function(value){
    			  setData.add(value);
    		  });
    	  });

    	  // Use max.apply to avoid console error in IE
    	  var maxDATAvalue = Math.max.apply(null, Array.from(setData));
    	  var maxValuePlusBuffer = maxDATAvalue + bufferLine;

    	  /* The default configuration for a scale can be easily changed using the scale service. */
    	  /* https://www.chartjs.org/docs/latest/axes/#updating-axis-defaults */
    	  Chart.scaleService.updateScaleDefaults('linear', {
    	      ticks: {
    	          max: maxValuePlusBuffer
    	      }
    	  });
     });
  </script>
  <!--/* [script] ============================================================================================================== */-->
</body>

</html>